<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>claro.engine documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="highlight/solarized-light.css" /><script type="text/javascript" src="highlight/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a> with <a href="https://github.com/xsc/codox-theme-rdash">RDash UI</a> theme</h2><h1><a href="index.html"><span class="project-title"><span class="project-name">claro</span> <span class="project-version">0.2.20</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="00-basics.html"><div class="inner"><span>Basic Resolution</span></div></a></li><li class="depth-1 "><a href="01-projection.html"><div class="inner"><span>Projections</span></div></a></li><li class="depth-1 "><a href="02-advanced-projection.html"><div class="inner"><span>Advanced Projections</span></div></a></li><li class="depth-1 "><a href="03-engine.html"><div class="inner"><span>Engine</span></div></a></li><li class="depth-1 "><a href="04-testing-and-debugging.html"><div class="inner"><span>Testing &amp; Debugging</span></div></a></li><li class="depth-1 "><a href="99-notes.html"><div class="inner"><span>Implementation Notes</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>claro</span></div></div></li><li class="depth-2"><a href="claro.data.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>data</span></div></a></li><li class="depth-3"><a href="claro.data.ops.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ops</span></div></a></li><li class="depth-2 current"><a href="claro.engine.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>engine</span></div></a></li><li class="depth-3 branch"><a href="claro.engine.adapter.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>adapter</span></div></a></li><li class="depth-3"><a href="claro.engine.selector.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>selector</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>middleware</span></div></div></li><li class="depth-3 branch"><a href="claro.middleware.cache.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cache</span></div></a></li><li class="depth-3 branch"><a href="claro.middleware.deferred.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>deferred</span></div></a></li><li class="depth-3 branch"><a href="claro.middleware.intercept.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>intercept</span></div></a></li><li class="depth-3 branch"><a href="claro.middleware.mock.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>mock</span></div></a></li><li class="depth-3 branch"><a href="claro.middleware.observe.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>observe</span></div></a></li><li class="depth-3"><a href="claro.middleware.transform.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>transform</span></div></a></li><li class="depth-2"><a href="claro.projection.html"><div class="inner"><span class="tree" style="top: -207px;"><span class="top" style="height: 216px;"></span><span class="bottom"></span></span><span>projection</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="claro.engine.html#var-default-impl"><div class="inner"><span>default-impl</span></div></a></li><li class="depth-1"><a href="claro.engine.html#var-default-opts"><div class="inner"><span>default-opts</span></div></a></li><li class="depth-1"><a href="claro.engine.html#var-engine"><div class="inner"><span>engine</span></div></a></li><li class="depth-1"><a href="claro.engine.html#var-impl"><div class="inner"><span>impl</span></div></a></li><li class="depth-1"><a href="claro.engine.html#var-multi-engine"><div class="inner"><span>multi-engine</span></div></a></li><li class="depth-1"><a href="claro.engine.html#var-run.21"><div class="inner"><span>run!</span></div></a></li><li class="depth-1"><a href="claro.engine.html#var-run.21.21"><div class="inner"><span>run!!</span></div></a></li><li class="depth-1"><a href="claro.engine.html#var-wrap"><div class="inner"><span>wrap</span></div></a></li><li class="depth-1"><a href="claro.engine.html#var-wrap-pre-transform"><div class="inner"><span>wrap-pre-transform</span></div></a></li><li class="depth-1"><a href="claro.engine.html#var-wrap-transform"><div class="inner"><span>wrap-transform</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">claro.engine</h1><div class="doc"><div class="markdown"><p>Main resolution and engine logic.</p>
<p>Claro’s resolution engine is powerful and customizable, allowing for flexible introspection and manipulation of every resolution run.</p>
<p>See the <a href="03-engine.html">Engine</a> documentation for details and examples.</p></div></div><div class="public anchor" id="var-default-impl"><h3>default-impl</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>The default deferred implementation used for resolution.</p></div></div><div class="src-link"><a href="https://github.com/xsc/claro/blob/master/src/claro/engine.cljc#L24">view source</a></div></div><div class="public anchor" id="var-default-opts"><h3>default-opts</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>The default engine options.</p></div></div><div class="src-link"><a href="https://github.com/xsc/claro/blob/master/src/claro/engine.cljc#L28">view source</a></div></div><div class="public anchor" id="var-engine"><h3>engine</h3><div class="usage"><code>(engine)</code><code>(engine opts)</code><code>(engine impl opts)</code></div><div class="doc"><div class="markdown"><p>Create a new resolution engine, based on the following options:</p>
<ul>
  <li><code>:env</code>: a value that is passed as the <code>env</code> parameter to <code>Resolvable</code>s’ <code>resolve!</code> and <code>resolve-batch!</code> functions (default: <code>{}</code>),</li>
  <li><code>:adapter</code>: a function that will be called to run calls to <code>resolve!</code> and <code>resolve-batch!</code>,</li>
  <li><code>:selector</code>: a <code>claro.engine.selector/Selector</code> implementation used during each iteration to decide what to resolve next,</li>
  <li><code>:max-cost</code>: a value describing the maximum resolution cost for each run, causing the engine to throw an <code>IllegalStateException</code> (default: <code>32</code>) if exceeded,</li>
  <li><code>check-cost?</code>: a flag enabling/disabling cost protection (default: <code>true</code>).</li>
</ul>
<p>The resulting value’s resolution behaviour can be wrapped using <code>claro.engine/wrap</code>.</p></div></div><div class="src-link"><a href="https://github.com/xsc/claro/blob/master/src/claro/engine.cljc#L39">view source</a></div></div><div class="public anchor" id="var-impl"><h3>impl</h3><div class="usage"><code>(impl engine)</code></div><div class="doc"><div class="markdown"><p>Return the given engines deferred implementation.</p></div></div><div class="src-link"><a href="https://github.com/xsc/claro/blob/master/src/claro/engine.cljc#L90">view source</a></div></div><div class="public anchor" id="var-multi-engine"><h3>multi-engine</h3><div class="usage"><code>(multi-engine)</code><code>(multi-engine base-engine)</code></div><div class="doc"><div class="markdown"><p>Create a resolution engine that takes a seq of values and resolves them in-order and independently using the optionally given base engine.</p>
<p>This is especially useful when resolving multiple mutations since the cache will be reset between runs.</p></div></div><div class="src-link"><a href="https://github.com/xsc/claro/blob/master/src/claro/engine.cljc#L63">view source</a></div></div><div class="public anchor" id="var-run.21"><h3>run!</h3><div class="usage"><code>(run! value)</code><code>(run! opts value)</code></div><div class="doc"><div class="markdown"><p>Resolve the given value using an engine created on-the-fly. See <code>claro.engine/engine</code> for available options. Immediately returns a deferred.</p></div></div><div class="src-link"><a href="https://github.com/xsc/claro/blob/master/src/claro/engine.cljc#L74">view source</a></div></div><div class="public anchor" id="var-run.21.21"><h3>run!!</h3><div class="usage"><code>(run!! value)</code><code>(run!! opts value)</code></div><div class="doc"><div class="markdown"><p>Resolve the given value using an engine created on-the-fly. See <code>claro.engine/engine</code> for available options. Blocks until the resolved value has been obtained.</p></div></div><div class="src-link"><a href="https://github.com/xsc/claro/blob/master/src/claro/engine.cljc#L81">view source</a></div></div><div class="public anchor" id="var-wrap"><h3>wrap</h3><div class="usage"><code>(wrap engine wrap-fn)</code></div><div class="doc"><div class="markdown"><p>Wrap the engine’s complete resolver function using the given <code>wrap-fn</code>. The resolution results will be wrapped as trees. See <a href="claro.engine.html#var-wrap-transform">wrap-transform</a> and <a href="claro.engine.html#var-wrap-pre-transform">wrap-pre-transform</a> for access to the transformed and raw results.</p></div></div><div class="src-link"><a href="https://github.com/xsc/claro/blob/master/src/claro/engine.cljc#L90">view source</a></div></div><div class="public anchor" id="var-wrap-pre-transform"><h3>wrap-pre-transform</h3><h4 class="added">added in 0.2.8</h4><div class="usage"><code>(wrap-pre-transform engine wrap-fn)</code></div><div class="doc"><div class="markdown"><p>Wrap the given engine’s resolver (before transformation) using the given <code>wrap-fn</code>.</p></div></div><div class="src-link"><a href="https://github.com/xsc/claro/blob/master/src/claro/engine.cljc#L90">view source</a></div></div><div class="public anchor" id="var-wrap-transform"><h3>wrap-transform</h3><h4 class="added">added in 0.2.8</h4><div class="usage"><code>(wrap-transform engine wrap-fn)</code></div><div class="doc"><div class="markdown"><p>Wrap the given engine’s resolver (after transformation but before tree wrapping) using the given <code>wrap-fn</code>.</p></div></div><div class="src-link"><a href="https://github.com/xsc/claro/blob/master/src/claro/engine.cljc#L90">view source</a></div></div></div></body></html>